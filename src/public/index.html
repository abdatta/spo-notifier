<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="style.css" rel="stylesheet">
    </head>
    <body>
        <nav>
            <div class="nav-wrapper">
                <div class="brand-logo left">SPO Notifier</div>
                <a class="right" href="https://www.fb.com/AboutRohan" target="_blank" rel="no-opener">by Abhishek Datta</a>
            </div>
        </nav>
        <div class="container">
            <div class="subscriber">
                <!-- <input id="email" type="text" placeholder="Enter your email..."> -->
                <button data-target="login" class="btn modal-trigger waves-effect waves-light">Subscribe To Notifications</button>
                <!-- Modal Structure -->
                <div id="login" class="modal">
                    <div class="modal-content" v-if="!success">
                        <h3 class="center">Notfications</h3>
                        <small class="error">{{ error }}</small>
                        <input type="text" placeholder="IITK CC username" v-model="email" autofocus>
                        <small style="width: 100%">Your email username without '@iitk.ac.in'.</small>
                        <input type="password" placeholder="IITK CC password" v-model="password" v-on:keyup.enter="subscribe()">
                        <small>We promise we will not store your password anywhere (db, logs, etc.). This is to only verify that the email indeed belongs to you. Still have trust issues? <a href="https://github.com/abdatta/spo-notifier" target="_blank">Checkout the source code.</a></small>
                    </div>
                    <div class="modal-content" v-else>
                        <h3 class="center">Notfications</h3>
                        <p>Subscribed sucessfully! Please check your email.</p>
                    </div>
                    <div class="modal-footer" v-if="!success">
                        <button class="waves-effect waves-green btn" v-bind:disabled="subscribing" v-on:click="subscribe()">{{ subscribing ? 'Subscribing...':'Subscribe' }}</button>
                    </div>
                    <div class="modal-footer" v-else>
                            <button class="modal-close waves-effect waves-green btn">Ok</button>
                    </div>
                </div>
            </div>
            <br>
            <div class="row" id="posts">
                <div class="post" v-for="(post, i) in posts">
                    <div class="card blue-grey darken-1">
                        <div v-on:click="toggle(i)" class="card-parent-content">
                            <div class="card-content white-text">
                                <span class="card-title">
                                    {{ post.title }}
                                    <i class="material-icons dropdown right">{{ expanded === i ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}</i>
                                </span>
                                <span id="date1"><i class="material-icons">schedule</i> {{ post.date }}</span>
                            </div>
                        </div>
                        <div v-bind:id="'post_body'+i" class="card-action" v-html="post.body"></div>
                    </div>
                </div>
            </div>
        </div>
        
    </body>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="script.js"></script>
</html>
